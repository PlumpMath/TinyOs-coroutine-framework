/*****************************************************************************************************
*************                   Created By: Yuval Lando                    ***************************
*****************************************************************************************************/

#ifndef _macro_1112222_
#define _macro_1112222_

#include "conf.h"

#define REPEAT(X,Y) REPEATI(DECR(X),Y)
#define REPEATI(X,Y) REPEATII(X,Y)
#define REPEATII(X,Y) REPEATI##X(Y)

#define REPEATI0(Y) Y(0)
#define REPEATI1(Y) Y(1) \
REPEATI0(Y)
#define REPEATI2(Y) Y(2) \
REPEATI1(Y)
#define REPEATI3(Y) Y(3) \
REPEATI2(Y)
#define REPEATI4(Y) Y(4) \
REPEATI3(Y)
#define REPEATI5(Y) Y(5) \
REPEATI4(Y)
#define REPEATI6(Y) Y(6) \
REPEATI5(Y)
#define REPEATI7(Y) Y(7) \
REPEATI6(Y)
#define REPEATI8(Y) Y(8) \
REPEATI7(Y)
#define REPEATI9(Y) Y(9) \
REPEATI8(Y)
#define REPEATI10(Y) Y(10) \
REPEATI9(Y)
#define REPEATI11(Y) Y(11) \
REPEATI10(Y)
#define REPEATI12(Y) Y(12) \
REPEATI11(Y)
#define REPEATI13(Y) Y(13) \
REPEATI12(Y)
#define REPEATI14(Y) Y(14) \
REPEATI13(Y)
#define REPEATI15(Y) Y(15) \
REPEATI14(Y)
#define REPEATI16(Y) Y(16) \
REPEATI15(Y)
#define REPEATI17(Y) Y(17) \
REPEATI16(Y)
#define REPEATI18(Y) Y(18) \
REPEATI17(Y)
#define REPEATI19(Y) Y(19) \
REPEATI18(Y)
#define REPEATI20(Y) Y(20) \
REPEATI19(Y)
#define REPEATI21(Y) Y(21) \
REPEATI20(Y)
#define REPEATI22(Y) Y(22) \
REPEATI21(Y)
#define REPEATI23(Y) Y(23) \
REPEATI22(Y)
#define REPEATI24(Y) Y(24) \
REPEATI23(Y)
#define REPEATI25(Y) Y(25) \
REPEATI24(Y)
#define REPEATI26(Y) Y(26) \
REPEATI25(Y)
#define REPEATI27(Y) Y(27) \
REPEATI26(Y)
#define REPEATI28(Y) Y(28) \
REPEATI27(Y)
#define REPEATI29(Y) Y(29) \
REPEATI28(Y)
#define REPEATI30(Y) Y(30) \
REPEATI29(Y)
#define REPEATI31(Y) Y(31) \
REPEATI30(Y)
#define REPEATI32(Y) Y(32) \
REPEATI31(Y)
#define REPEATI33(Y) Y(33) \
REPEATI32(Y)
#define REPEATI34(Y) Y(34) \
REPEATI33(Y)
#define REPEATI35(Y) Y(35) \
REPEATI34(Y)
#define REPEATI36(Y) Y(36) \
REPEATI35(Y)
#define REPEATI37(Y) Y(37) \
REPEATI36(Y)
#define REPEATI38(Y) Y(38) \
REPEATI37(Y)
#define REPEATI39(Y) Y(39) \
REPEATI38(Y)
#define REPEATI40(Y) Y(40) \
REPEATI39(Y)
#define REPEATI41(Y) Y(41) \
REPEATI40(Y)
#define REPEATI42(Y) Y(42) \
REPEATI41(Y)
#define REPEATI43(Y) Y(43) \
REPEATI42(Y)
#define REPEATI44(Y) Y(44) \
REPEATI43(Y)
#define REPEATI45(Y) Y(45) \
REPEATI44(Y)
#define REPEATI46(Y) Y(46) \
REPEATI45(Y)
#define REPEATI47(Y) Y(47) \
REPEATI46(Y)
#define REPEATI48(Y) Y(48) \
REPEATI47(Y)
#define REPEATI49(Y) Y(49) \
REPEATI48(Y)
#define REPEATI50(Y) Y(50) \
REPEATI49(Y)
#define REPEATI51(Y) Y(51) \
REPEATI50(Y)
#define REPEATI52(Y) Y(52) \
REPEATI51(Y)
#define REPEATI53(Y) Y(53) \
REPEATI52(Y)
#define REPEATI54(Y) Y(54) \
REPEATI53(Y)
#define REPEATI55(Y) Y(55) \
REPEATI54(Y)
#define REPEATI56(Y) Y(56) \
REPEATI55(Y)
#define REPEATI57(Y) Y(57) \
REPEATI56(Y)
#define REPEATI58(Y) Y(58) \
REPEATI57(Y)
#define REPEATI59(Y) Y(59) \
REPEATI58(Y)
#define REPEATI60(Y) Y(60) \
REPEATI59(Y)
#define REPEATI61(Y) Y(61) \
REPEATI60(Y)
#define REPEATI62(Y) Y(62) \
REPEATI61(Y)
#define REPEATI63(Y) Y(63) \
REPEATI62(Y)
#define REPEATI64(Y) Y(64) \
REPEATI63(Y)
#define REPEATI65(Y) Y(65) \
REPEATI64(Y)
#define REPEATI66(Y) Y(66) \
REPEATI65(Y)
#define REPEATI67(Y) Y(67) \
REPEATI66(Y)
#define REPEATI68(Y) Y(68) \
REPEATI67(Y)
#define REPEATI69(Y) Y(69) \
REPEATI68(Y)
#define REPEATI70(Y) Y(70) \
REPEATI69(Y)
#define REPEATI71(Y) Y(71) \
REPEATI70(Y)
#define REPEATI72(Y) Y(72) \
REPEATI71(Y)
#define REPEATI73(Y) Y(73) \
REPEATI72(Y)
#define REPEATI74(Y) Y(74) \
REPEATI73(Y)
#define REPEATI75(Y) Y(75) \
REPEATI74(Y)
#define REPEATI76(Y) Y(76) \
REPEATI75(Y)
#define REPEATI77(Y) Y(77) \
REPEATI76(Y)
#define REPEATI78(Y) Y(78) \
REPEATI77(Y)
#define REPEATI79(Y) Y(79) \
REPEATI78(Y)
#define REPEATI80(Y) Y(80) \
REPEATI79(Y)
#define REPEATI81(Y) Y(81) \
REPEATI80(Y)
#define REPEATI82(Y) Y(82) \
REPEATI81(Y)
#define REPEATI83(Y) Y(83) \
REPEATI82(Y)
#define REPEATI84(Y) Y(84) \
REPEATI83(Y)
#define REPEATI85(Y) Y(85) \
REPEATI84(Y)
#define REPEATI86(Y) Y(86) \
REPEATI85(Y)
#define REPEATI87(Y) Y(87) \
REPEATI86(Y)
#define REPEATI88(Y) Y(88) \
REPEATI87(Y)
#define REPEATI89(Y) Y(89) \
REPEATI88(Y)
#define REPEATI90(Y) Y(90) \
REPEATI89(Y)
#define REPEATI91(Y) Y(91) \
REPEATI90(Y)
#define REPEATI92(Y) Y(92) \
REPEATI91(Y)
#define REPEATI93(Y) Y(93) \
REPEATI92(Y)
#define REPEATI94(Y) Y(94) \
REPEATI93(Y)
#define REPEATI95(Y) Y(95) \
REPEATI94(Y)
#define REPEATI96(Y) Y(96) \
REPEATI95(Y)
#define REPEATI97(Y) Y(97) \
REPEATI96(Y)
#define REPEATI98(Y) Y(98) \
REPEATI97(Y)
#define REPEATI99(Y) Y(99) \
REPEATI98(Y)



#define DECR(X) DECRI(X)
#define DECRI(X) DECRI##X

#define DECRI1 0
#define DECRI2 1
#define DECRI3 2
#define DECRI4 3
#define DECRI5 4
#define DECRI6 5
#define DECRI7 6
#define DECRI8 7
#define DECRI9 8
#define DECRI10 9
#define DECRI11 10
#define DECRI12 11
#define DECRI13 12
#define DECRI14 13
#define DECRI15 14
#define DECRI16 15
#define DECRI17 16
#define DECRI18 17
#define DECRI19 18
#define DECRI20 19
#define DECRI21 20
#define DECRI22 21
#define DECRI23 22
#define DECRI24 23
#define DECRI25 24
#define DECRI26 25
#define DECRI27 26
#define DECRI28 27
#define DECRI29 28
#define DECRI30 29
#define DECRI31 30
#define DECRI32 31
#define DECRI33 32
#define DECRI34 33
#define DECRI35 34
#define DECRI36 35
#define DECRI37 36
#define DECRI38 37
#define DECRI39 38
#define DECRI40 39
#define DECRI41 40
#define DECRI42 41
#define DECRI43 42
#define DECRI44 43
#define DECRI45 44
#define DECRI46 45
#define DECRI47 46
#define DECRI48 47
#define DECRI49 48
#define DECRI50 49
#define DECRI51 50
#define DECRI52 51
#define DECRI53 52
#define DECRI54 53
#define DECRI55 54
#define DECRI56 55
#define DECRI57 56
#define DECRI58 57
#define DECRI59 58
#define DECRI60 59
#define DECRI61 60
#define DECRI62 61
#define DECRI63 62
#define DECRI64 63
#define DECRI65 64
#define DECRI66 65
#define DECRI67 66
#define DECRI68 67
#define DECRI69 68
#define DECRI70 69
#define DECRI71 70
#define DECRI72 71
#define DECRI73 72
#define DECRI74 73
#define DECRI75 74
#define DECRI76 75
#define DECRI77 76
#define DECRI78 77
#define DECRI79 78
#define DECRI80 79
#define DECRI81 80
#define DECRI82 81
#define DECRI83 82
#define DECRI84 83
#define DECRI85 84
#define DECRI86 85
#define DECRI87 86
#define DECRI88 87
#define DECRI89 88
#define DECRI90 89
#define DECRI91 90
#define DECRI92 91
#define DECRI93 92
#define DECRI94 93
#define DECRI95 94
#define DECRI96 95
#define DECRI97 96
#define DECRI98 97
#define DECRI99 98

#define con(X,Y) conI(X,Y)
#define conI(X,Y) X##Y

//Need to define CORUTINE_NUM,INTERFACE_NAME and APP_NAME in conf.h before use

#define USES_INTER_NUM(NUM)  USES_INTER_NUMI(NUM)
#define USES_INTER_NUMI(NUM)  uses interface CorutineI as con(INTERFACE_NAME,NUM);

#define USE_INTERFACE REPEAT(CORUTINE_NUM,USES_INTER_NUM)

#define WIRE_INTERFACE_NUM(NUM) WIRE_INTERFACE_NUMI(NUM)
#define WIRE_INTERFACE_NUMI(NUM) APP_NAME . con(INTERFACE_NAME,NUM) -> CorutineM.CorutineI[ NUM ]; 

#define WIRE_INTERFACE REPEAT(CORUTINE_NUM,WIRE_INTERFACE_NUM)

//Create tasks for every corutine
#define BUILDTASK(X) BUILDTASKI(X)
#define BUILDTASKI(X) task void runCorutine##X() \
{ \
	coIndex= X ; \
	signal CorutineI.run[ X ](); \
} \

#define BUILDTASKS REPEAT(CORUTINE_NUM,BUILDTASK)

//Run all the tasks
#define POST_MAC(X) POST_MACI(X)
#define POST_MACI(X) post runCorutine##X(); 

#define RUN_ALL_TASKS REPEAT(CORUTINE_NUM,POST_MAC)

//Macro RUNTASK run only one task chocen by switch
#define SWITCH_TASK(X) SWITCH_TASKI(X)
#define SWITCH_TASKI(X) case X: POST_MAC(X); break;
#define RUN_TASK(X) RUN_TASKI(X)
#define RUN_TASKI(X) switch ( X ) { \
REPEAT(CORUTINE_NUM,SWITCH_TASK) \
} \

//Put macro results in quote ("")
#define QUOTE(X) QUOTEI(X)
#define QUOTEI(X) #X
 

#endif

